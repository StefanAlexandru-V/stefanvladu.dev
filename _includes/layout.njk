<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ site.site.title }}</title>
  <meta name="description" content="{{ site.site.description }}" />
  <meta property="og:title" content="{{ site.site.title }}" />
  <meta property="og:description" content="{{ site.site.description }}" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://stefanvladu.dev" />
  <meta property="og:image" content="https://stefanvladu.dev/me.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{{ site.site.title }}" />
  <meta name="twitter:description" content="{{ site.site.description }}" />
  <meta name="twitter:image" content="https://stefanvladu.dev/me.jpg" />
  <link rel="icon" type="image/jpeg" href="/me.jpg" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://api.fontshare.com/v2/css?f[]=satoshi@300,400,500,700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,400;0,9..144,500;1,9..144,300;1,9..144,400;1,9..144,500&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      /* Light mode - warm cream palette */
      --bg:      #FAF8F5;
      --bg-gradient-1: #FFE8D6;
      --bg-gradient-2: #E8F0FF;
      --bg-gradient-3: #F0E8FF;
      --surface: rgba(255, 255, 255, 0.7);
      --surface-solid: #FFFFFF;
      --surface-hover: rgba(255, 255, 255, 0.9);
      --border:  rgba(0, 0, 0, 0.06);
      --border-strong: rgba(0, 0, 0, 0.1);
      --dim:     #9B9386;
      --muted:   #6B6459;
      --body:    #3D3833;
      --ink:     #1A1714;
      --accent:  #D97757;
      --accent-soft: rgba(217, 119, 87, 0.1);
      --accent-glow: rgba(217, 119, 87, 0.15);
      --blue:    #5B8FB9;
      --blue-soft: rgba(91, 143, 185, 0.1);
      --green:   #4A9B6D;
      --green-soft: rgba(74, 155, 109, 0.15);
      --purple:  #8B5CF6;
      --purple-soft: rgba(139, 92, 246, 0.1);
      
      /* Typography */
      --sans:    'Satoshi', -apple-system, BlinkMacSystemFont, sans-serif;
      --serif:   'Fraunces', Georgia, serif;
      
      /* Spacing */
      --radius:  20px;
      --radius-sm: 12px;
      --radius-xs: 8px;
      --gap:     16px;
      --max:     1100px;
      
      /* Glass effect */
      --glass-bg: rgba(255, 255, 255, 0.82);
      --glass-border: rgba(255, 255, 255, 0.4);
      --blur: 12px;
      
      /* Shadows */
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.02);
      --shadow: 0 4px 12px rgba(0,0,0,0.03), 0 1px 3px rgba(0,0,0,0.04);
      --shadow-lg: 0 8px 30px rgba(0,0,0,0.06), 0 2px 8px rgba(0,0,0,0.04);
      --shadow-glow: 0 0 40px var(--accent-glow);
    }

    [data-theme="dark"] {
      --bg:      #131211;
      --bg-gradient-1: #2D1F1A;
      --bg-gradient-2: #1A1F2D;
      --bg-gradient-3: #251A2D;
      --surface: rgba(30, 28, 26, 0.7);
      --surface-solid: #1E1C1A;
      --surface-hover: rgba(40, 38, 35, 0.9);
      --border:  rgba(255, 255, 255, 0.06);
      --border-strong: rgba(255, 255, 255, 0.1);
      --dim:     #6B6660;
      --muted:   #9B958C;
      --body:    #D4D0C8;
      --ink:     #FAF9F7;
      --accent:  #E89B7B;
      --accent-soft: rgba(232, 155, 123, 0.15);
      --accent-glow: rgba(232, 155, 123, 0.2);
      --blue:    #7AABCC;
      --blue-soft: rgba(122, 171, 204, 0.15);
      --green:   #6DBB8D;
      --green-soft: rgba(109, 187, 141, 0.15);
      --purple:  #A78BFA;
      --purple-soft: rgba(167, 139, 250, 0.15);
      --glass-bg: rgba(30, 28, 26, 0.82);
      --glass-border: rgba(255, 255, 255, 0.08);
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
      --shadow: 0 4px 12px rgba(0,0,0,0.2), 0 1px 3px rgba(0,0,0,0.3);
      --shadow-lg: 0 8px 30px rgba(0,0,0,0.3), 0 2px 8px rgba(0,0,0,0.2);
    }

    /* Noise texture - very subtle grain overlay */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0.03;
      pointer-events: none;
      z-index: 1000;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    }

    body {
      background: var(--bg);
      color: var(--body);
      font-family: var(--sans);
      font-size: 15px;
      font-weight: 400;
      line-height: 1.6;
      padding: 24px;
      min-height: 100vh;
      transition: background 0.4s ease, color 0.4s ease;
      -webkit-font-smoothing: antialiased;
      overflow-x: hidden;
    }

    /* Animated gradient mesh background */
    .gradient-mesh {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }

    .gradient-blob {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.35;
      animation: float 20s ease-in-out infinite;
    }

    .blob-1 {
      width: 600px;
      height: 600px;
      background: var(--bg-gradient-1);
      top: -200px;
      right: -100px;
      animation-delay: 0s;
    }

    .blob-2 {
      width: 500px;
      height: 500px;
      background: var(--bg-gradient-2);
      bottom: -150px;
      left: -100px;
      animation-delay: -7s;
    }

    .blob-3 {
      width: 400px;
      height: 400px;
      background: var(--bg-gradient-3);
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation-delay: -14s;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      25% { transform: translate(30px, -30px) scale(1.05); }
      50% { transform: translate(-20px, 20px) scale(0.95); }
      75% { transform: translate(20px, 30px) scale(1.02); }
    }

    .blob-3 {
      animation-name: floatCenter;
    }

    @keyframes floatCenter {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      25% { transform: translate(-45%, -55%) scale(1.05); }
      50% { transform: translate(-55%, -45%) scale(0.95); }
      75% { transform: translate(-48%, -52%) scale(1.02); }
    }

    /* Scroll progress indicator */
    .scroll-progress {
      position: fixed;
      top: 0;
      left: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), var(--purple));
      z-index: 1001;
      transform-origin: left;
      transform: scaleX(0);
      transition: transform 0.1s ease-out;
    }

    /* Theme toggle */
    .theme-toggle {
      position: fixed;
      top: 24px;
      right: 24px;
      z-index: 100;
      width: 48px;
      height: 48px;
      border-radius: 14px;
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: var(--shadow);
    }
    
    .theme-toggle:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: var(--shadow-lg);
      border-color: var(--border-strong);
    }
    
    .theme-toggle:active { transform: translateY(0) scale(0.98); }
    
    .theme-toggle svg {
      width: 22px;
      height: 22px;
      color: var(--muted);
      transition: all 0.3s ease;
    }
    
    .theme-toggle:hover svg { color: var(--accent); }
    
    .sun-icon { display: none; }
    .moon-icon { display: block; }
    [data-theme="dark"] .sun-icon { display: block; }
    [data-theme="dark"] .moon-icon { display: none; }

    /* Palette toggle button (touch devices only) */
    .palette-toggle {
      position: fixed;
      top: 80px;
      right: 24px;
      z-index: 100;
      width: 48px;
      height: 48px;
      border-radius: 14px;
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
      cursor: pointer;
      display: none;
      align-items: center;
      justify-content: center;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: var(--shadow);
    }

    .palette-toggle svg {
      width: 22px;
      height: 22px;
      color: var(--muted);
      transition: color 0.3s ease;
    }

    @media (hover: none) {
      .palette-toggle { display: flex; }
    }

    /* Accent color picker */
    .accent-picker {
      position: fixed;
      top: 80px;
      right: 24px;
      z-index: 100;
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 8px;
      border-radius: 14px;
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
      box-shadow: var(--shadow);
      opacity: 0;
      transform: translateX(10px);
      pointer-events: none;
      transition: all 0.3s ease;
    }

    .accent-picker.visible {
      opacity: 1;
      transform: translateX(0);
      pointer-events: auto;
    }

    .accent-btn {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: 2px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .accent-btn:hover { transform: scale(1.15); }
    .accent-btn.active { border-color: var(--ink); transform: scale(1.1); }
    .accent-btn[data-accent="coral"] { background: #D97757; }
    .accent-btn[data-accent="blue"] { background: #5B8FB9; }
    .accent-btn[data-accent="purple"] { background: #8B5CF6; }
    .accent-btn[data-accent="green"] { background: #4A9B6D; }
    .accent-btn[data-accent="pink"] { background: #E879A9; }

    /* Mobile: accent picker appears below palette button */
    @media (hover: none) {
      .accent-picker {
        top: 136px;
        right: 24px;
        flex-direction: column;
        opacity: 0;
        transform: translateX(10px);
      }
      .accent-picker.visible {
        opacity: 1;
        transform: translateX(0);
      }
    }

    /* Bento Grid Layout */
    .bento {
      max-width: var(--max);
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: var(--gap);
      position: relative;
      z-index: 1;
    }

    /* Glassmorphism Cards */
    .card {
      background: var(--glass-bg);
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
      border-radius: var(--radius);
      border: 1px solid var(--glass-border);
      padding: 28px;
      box-shadow: var(--shadow);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    /* Cursor glow effect */
    .card::before {
      content: '';
      position: absolute;
      top: var(--mouse-y, 50%);
      left: var(--mouse-x, 50%);
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, var(--accent-glow) 0%, transparent 70%);
      transform: translate(-50%, -50%);
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
      z-index: 0;
    }

    .card:hover::before { opacity: 1; }
    .card > * { position: relative; z-index: 1; }
    
    .card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg), var(--shadow-glow);
      border-color: var(--border-strong);
    }

    /* Card sizes */
    .card-hero { grid-column: span 8; padding: 44px; }
    .card-profile { grid-column: span 4; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
    .card-full { grid-column: span 12; }
    .card-half { grid-column: span 6; }
    .card-third { grid-column: span 4; }
    .card-two-thirds { grid-column: span 8; }
    .card-small { grid-column: span 3; }

    /* Hero card */
    .hero-eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 0.72rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 20px;
      padding: 6px 12px;
      background: var(--accent-soft);
      border-radius: 20px;
    }

    .hero-eyebrow::before {
      content: '';
      width: 6px;
      height: 6px;
      background: var(--accent);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(1.2); }
    }
    
    h1 {
      font-family: var(--serif);
      font-size: clamp(2.4rem, 5vw, 3.4rem);
      font-weight: 400;
      font-style: italic;
      color: var(--ink);
      line-height: 1.08;
      margin-bottom: 24px;
      letter-spacing: -0.02em;
    }
    
    h1 span { 
      color: var(--accent); 
      font-style: normal;
      background: linear-gradient(135deg, var(--accent), var(--purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .intro {
      font-size: 1.1rem;
      color: var(--muted);
      line-height: 1.8;
      max-width: 540px;
      font-weight: 400;
    }
    
    .intro strong {
      color: var(--body);
      font-weight: 600;
    }

    /* Profile card */
    .avatar {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent) 0%, var(--purple) 100%);
      padding: 3px;
      margin-bottom: 18px;
      animation: avatarGlow 3s ease-in-out infinite;
    }

    @keyframes avatarGlow {
      0%, 100% { box-shadow: 0 0 20px var(--accent-glow), 0 0 40px transparent; }
      50% { box-shadow: 0 0 30px var(--accent-glow), 0 0 60px var(--purple-soft); }
    }

    .avatar-inner {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
      object-position: center top;
      display: block;
    }
    
    .profile-name {
      font-weight: 600;
      color: var(--ink);
      font-size: 1.15rem;
      margin-bottom: 4px;
    }
    
    .profile-title {
      font-size: 0.85rem;
      color: var(--muted);
      margin-bottom: 16px;
    }

    /* Availability badge */
    .availability {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      background: var(--green-soft);
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--green);
    }

    .availability-dot {
      width: 8px;
      height: 8px;
      background: var(--green);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }

    /* Currently card */
    .currently-item {
      display: flex;
      align-items: flex-start;
      gap: 14px;
      padding: 14px 0;
      border-bottom: 1px solid var(--border);
    }

    .currently-item:last-child { border-bottom: none; }

    .currently-icon {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-xs);
      background: var(--accent-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .currently-icon svg {
      width: 18px;
      height: 18px;
      color: var(--accent);
    }

    .currently-icon.blue { background: var(--blue-soft); }
    .currently-icon.blue svg { color: var(--blue); }
    .currently-icon.purple { background: var(--purple-soft); }
    .currently-icon.purple svg { color: var(--purple); }
    .currently-icon.green { background: var(--green-soft); }
    .currently-icon.green svg { color: var(--green); }

    .currently-label {
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--dim);
      margin-bottom: 2px;
    }

    .currently-value {
      font-size: 0.92rem;
      color: var(--ink);
      font-weight: 500;
    }

    /* Section labels */
    .label {
      font-size: 0.68rem;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--dim);
      margin-bottom: 22px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .label::after {
      content: '';
      flex: 1;
      height: 1px;
      background: linear-gradient(90deg, var(--border), transparent);
    }

    /* Jobs */
    .jobs { display: flex; flex-direction: column; gap: 2px; }
    
    .job {
      display: grid;
      grid-template-columns: 100px 1fr;
      gap: 16px;
      padding: 16px 18px;
      margin: 0 -18px;
      border-radius: var(--radius-sm);
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: default;
    }
    
    .job:hover { 
      background: var(--surface-hover);
      transform: translateX(4px);
    }
    
    .job-date {
      font-size: 0.72rem;
      font-weight: 600;
      color: var(--dim);
      padding-top: 3px;
    }
    
    .job-role {
      font-weight: 600;
      color: var(--ink);
      font-size: 0.95rem;
      margin-bottom: 3px;
    }
    
    .job-co {
      font-size: 0.82rem;
      color: var(--muted);
    }

    .job-desc {
      font-size: 0.82rem;
      color: var(--dim);
      margin-top: 6px;
      line-height: 1.5;
    }

    /* Wins */
    .wins { display: flex; flex-direction: column; gap: 14px; }
    
    .win {
      padding: 18px;
      background: var(--surface);
      border-radius: var(--radius-sm);
      border-left: 3px solid var(--accent);
      transition: all 0.25s ease;
    }

    .win:hover {
      transform: translateX(4px);
      background: var(--surface-hover);
    }
    
    .win-highlight {
      font-weight: 700;
      color: var(--ink);
      font-size: 0.98rem;
      margin-bottom: 4px;
    }
    
    .win-desc {
      font-size: 0.85rem;
      color: var(--muted);
    }

    /* Skills */
    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .tag {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--muted);
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 8px 14px;
      border-radius: 24px;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: default;
    }
    
    .tag:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: var(--shadow);
      border-color: var(--border-strong);
    }
    
    .tag.hi {
      color: var(--accent);
      background: var(--accent-soft);
      border-color: transparent;
    }
    
    .tag.hi:hover { 
      background: var(--accent-soft);
      box-shadow: 0 4px 15px var(--accent-glow);
    }
    
    .tag.lo {
      color: var(--blue);
      background: var(--blue-soft);
      border-color: transparent;
    }
    
    .tag.lo:hover { 
      background: var(--blue-soft);
      box-shadow: 0 4px 15px rgba(91, 143, 185, 0.2);
    }

    /* Contact links - magnetic effect handled by JS */
    .links { display: flex; flex-direction: column; gap: 6px; }
    
    .link {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 18px;
      margin: 0 -18px;
      border-radius: var(--radius-sm);
      text-decoration: none;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .link:hover { 
      background: var(--surface-hover);
      transform: translateX(4px);
    }
    
    .link-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-xs);
      background: var(--surface);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all 0.25s ease;
    }
    
    .link-icon svg {
      width: 20px;
      height: 20px;
      color: var(--muted);
      transition: all 0.25s ease;
    }
    
    .link:hover .link-icon {
      background: var(--accent-soft);
      border-color: var(--accent);
      transform: scale(1.1) rotate(-5deg);
    }
    
    .link:hover .link-icon svg { color: var(--accent); }
    
    .link-content { flex: 1; min-width: 0; }
    
    .link-label {
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--dim);
    }
    
    .link-val {
      font-size: 0.92rem;
      color: var(--body);
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .link:hover .link-val { color: var(--ink); }
    
    .arrow {
      font-size: 1.2rem;
      color: var(--border-strong);
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .link:hover .arrow {
      color: var(--accent);
      transform: translateX(6px);
    }

    /* Footer note */
    .footer-note {
      grid-column: span 12;
      text-align: center;
      padding: 40px 24px;
      font-size: 0.8rem;
      color: var(--dim);
      font-weight: 500;
    }

    .footer-note a {
      color: var(--muted);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .footer-note a:hover { color: var(--accent); }

    .footer-sep {
      margin: 0 8px;
      opacity: 0.4;
    }

    /* Animations */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(30px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .card { animation: fadeUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards; opacity: 0; }
    .card-hero { animation: fadeUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
    .card:nth-child(1) { animation-delay: 0s; }
    .card:nth-child(2) { animation-delay: 0.08s; }
    .card:nth-child(3) { animation-delay: 0.16s; }
    .card:nth-child(4) { animation-delay: 0.24s; }
    .card:nth-child(5) { animation-delay: 0.32s; }
    .card:nth-child(6) { animation-delay: 0.40s; }
    .card:nth-child(7) { animation-delay: 0.48s; }

    /* Responsive */
    @media (max-width: 900px) {
      .card-hero { grid-column: span 12; }
      .card-profile { grid-column: span 12; padding: 36px; }
      .card-third { grid-column: span 12; }
      .card-two-thirds { grid-column: span 12; }
      .card-small { grid-column: span 6; }
    }

    /* Tablet: keep highlights + skills side-by-side */
    @media (min-width: 601px) and (max-width: 900px) {
      .card-half { grid-column: span 6; }
    }

    @media (max-width: 600px) {
      body { padding: 16px; }
      .bento { gap: 12px; }
      .card { padding: 22px; }
      .card-hero { padding: 30px; }
      .theme-toggle { top: 16px; right: 16px; width: 44px; height: 44px; }
      .accent-picker { top: 68px; right: 16px; }
      .job { grid-template-columns: 1fr; gap: 6px; }
      .job-date { padding-top: 0; }
      .card-small { grid-column: span 12; }
      .card-half { grid-column: span 12; }
      .gradient-blob { opacity: 0.4; }
    }

    /* 3D tilt – better GPU compositing */
    .card { will-change: transform; }

    /* Toast notification */
    .toast {
      position: fixed;
      bottom: 32px;
      left: 50%;
      transform: translateX(-50%) translateY(16px);
      background: var(--surface-solid);
      border: 1px solid var(--border-strong);
      border-radius: var(--radius-sm);
      padding: 12px 20px;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--body);
      box-shadow: var(--shadow-lg);
      z-index: 1002;
      opacity: 0;
      transition: opacity 0.35s ease, transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
      pointer-events: none;
      display: flex;
      align-items: center;
      gap: 8px;
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
      white-space: nowrap;
    }

    .toast.visible {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .toast-icon { color: var(--green); font-weight: 700; }

    /* Accessibility: respect reduced-motion preference */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* Accent color variations */
    [data-accent="blue"] {
      --accent: #5B8FB9;
      --accent-soft: rgba(91, 143, 185, 0.12);
      --accent-glow: rgba(91, 143, 185, 0.2);
    }
    [data-accent="purple"] {
      --accent: #8B5CF6;
      --accent-soft: rgba(139, 92, 246, 0.12);
      --accent-glow: rgba(139, 92, 246, 0.2);
    }
    [data-accent="green"] {
      --accent: #4A9B6D;
      --accent-soft: rgba(74, 155, 109, 0.12);
      --accent-glow: rgba(74, 155, 109, 0.2);
    }
    [data-accent="pink"] {
      --accent: #E879A9;
      --accent-soft: rgba(232, 121, 169, 0.12);
      --accent-glow: rgba(232, 121, 169, 0.2);
    }
  </style>
</head>
<body>
  <!-- Animated gradient mesh background -->
  <div class="gradient-mesh">
    <div class="gradient-blob blob-1"></div>
    <div class="gradient-blob blob-2"></div>
    <div class="gradient-blob blob-3"></div>
  </div>

  <!-- Scroll progress indicator -->
  <div class="scroll-progress" id="scroll-progress"></div>

  <!-- Theme toggle -->
  <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
    </svg>
    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
    </svg>
  </button>

  <!-- Palette toggle (touch devices only) -->
  <button class="palette-toggle" id="palette-toggle" aria-label="Choose accent color">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" d="M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42" />
    </svg>
  </button>

  <!-- Accent color picker -->
  <div class="accent-picker" id="accent-picker">
    <button class="accent-btn active" data-accent="coral" aria-label="Coral accent"></button>
    <button class="accent-btn" data-accent="blue" aria-label="Blue accent"></button>
    <button class="accent-btn" data-accent="purple" aria-label="Purple accent"></button>
    <button class="accent-btn" data-accent="green" aria-label="Green accent"></button>
    <button class="accent-btn" data-accent="pink" aria-label="Pink accent"></button>
  </div>
  
  {{ content | safe }}
  
  <script>
    // Theme toggle
    const toggle = document.getElementById('theme-toggle');
    const html = document.documentElement;
    const accentPicker = document.getElementById('accent-picker');

    const savedTheme = localStorage.getItem('theme');
    const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

    if (savedTheme) {
      html.setAttribute('data-theme', savedTheme);
    } else if (systemDark) {
      html.setAttribute('data-theme', 'dark');
    }

    // Load saved accent
    const savedAccent = localStorage.getItem('accent');
    if (savedAccent) {
      html.setAttribute('data-accent', savedAccent);
      document.querySelectorAll('.accent-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.accent === savedAccent);
      });
    }

    toggle.addEventListener('click', () => {
      const current = html.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
    });

    // Show accent picker on hover (desktop) or tap (touch)
    const isTouchDevice = () => window.matchMedia('(hover: none)').matches;

    toggle.addEventListener('mouseenter', () => {
      if (!isTouchDevice()) accentPicker.classList.add('visible');
    });
    accentPicker.addEventListener('mouseenter', () => {
      if (!isTouchDevice()) accentPicker.classList.add('visible');
    });
    accentPicker.addEventListener('mouseleave', () => {
      if (!isTouchDevice()) accentPicker.classList.remove('visible');
    });
    toggle.addEventListener('mouseleave', () => {
      if (!isTouchDevice()) {
        setTimeout(() => {
          if (!accentPicker.matches(':hover')) {
            accentPicker.classList.remove('visible');
          }
        }, 100);
      }
    });
    // Palette button tap for touch devices
    const paletteBtn = document.getElementById('palette-toggle');
    if (paletteBtn) {
      paletteBtn.addEventListener('click', () => {
        accentPicker.classList.toggle('visible');
      });
      // Close picker when tapping outside
      document.addEventListener('click', (e) => {
        if (!paletteBtn.contains(e.target) && !accentPicker.contains(e.target)) {
          accentPicker.classList.remove('visible');
        }
      });
    }

    // Accent color picker
    document.querySelectorAll('.accent-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const accent = btn.dataset.accent;
        if (accent === 'coral') {
          html.removeAttribute('data-accent');
        } else {
          html.setAttribute('data-accent', accent);
        }
        localStorage.setItem('accent', accent);
        document.querySelectorAll('.accent-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
      });
    });

    // Scroll progress indicator
    const scrollProgress = document.getElementById('scroll-progress');
    window.addEventListener('scroll', () => {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const scrollPercent = docHeight > 0 ? scrollTop / docHeight : 0;
      scrollProgress.style.transform = `scaleX(${scrollPercent})`;
    });

    // Respect reduced-motion preference
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    // 3D Tilt + Cursor glow effect on cards
    document.querySelectorAll('.card').forEach(card => {
      card.addEventListener('mouseenter', () => {
        // Suppress transform transition so tilt tracks cursor instantly
        card.style.transition = 'box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.4s ease';
      });

      card.addEventListener('mousemove', (e) => {
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        // Cursor glow
        card.style.setProperty('--mouse-x', `${x}px`);
        card.style.setProperty('--mouse-y', `${y}px`);

        // 3D tilt
        if (!prefersReducedMotion) {
          const cx = rect.width / 2;
          const cy = rect.height / 2;
          const rotX = ((y - cy) / cy) * -6;
          const rotY = ((x - cx) / cx) * 6;
          card.style.transform = `perspective(1000px) rotateX(${rotX}deg) rotateY(${rotY}deg) translateY(-4px)`;
        }
      });

      card.addEventListener('mouseleave', () => {
        // Restore full transition so the reset animates smoothly
        card.style.transition = '';
        card.style.transform = '';
      });
    });

    // Magnetic effect on links
    document.querySelectorAll('.link').forEach(link => {
      link.addEventListener('mousemove', (e) => {
        const rect = link.getBoundingClientRect();
        const x = e.clientX - rect.left - rect.width / 2;
        const y = e.clientY - rect.top - rect.height / 2;
        const icon = link.querySelector('.link-icon');
        if (icon) {
          icon.style.transform = `translate(${x * 0.15}px, ${y * 0.15}px) scale(1.1) rotate(-5deg)`;
        }
      });

      link.addEventListener('mouseleave', () => {
        const icon = link.querySelector('.link-icon');
        if (icon) {
          icon.style.transform = '';
        }
      });
    });

    // Toast notification
    function showToast(message) {
      const existing = document.querySelector('.toast');
      if (existing) existing.remove();

      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.innerHTML = `<span class="toast-icon">✓</span>${message}`;
      document.body.appendChild(toast);

      // Two rAF frames ensure transition plays after element is painted
      requestAnimationFrame(() => requestAnimationFrame(() => toast.classList.add('visible')));

      setTimeout(() => {
        toast.classList.remove('visible');
        setTimeout(() => toast.remove(), 400);
      }, 2500);
    }

    // Copy email to clipboard on click
    const emailLink = document.querySelector('a[href^="mailto:"]');
    if (emailLink && navigator.clipboard) {
      emailLink.addEventListener('click', () => {
        const email = emailLink.querySelector('.link-val')?.textContent?.trim();
        if (email) {
          navigator.clipboard.writeText(email).then(() => showToast('Email copied!')).catch(() => {});
        }
      });
    }

    // Animated number counters in highlights
    function easeOutCubic(t) { return 1 - Math.pow(1 - t, 3); }

    function animateCounter(el) {
      const original = el.textContent;
      const match = original.match(/(\d+\.?\d*)/);
      if (!match) return;

      const target = parseFloat(match[1]);
      const isFloat = match[1].includes('.');
      const duration = 1100;
      const start = performance.now();

      function tick(now) {
        const progress = Math.min((now - start) / duration, 1);
        const val = easeOutCubic(progress) * target;
        el.textContent = original.replace(match[1], isFloat ? val.toFixed(1) : Math.round(val));
        if (progress < 1) requestAnimationFrame(tick);
        else el.textContent = original; // snap to exact final text
      }

      requestAnimationFrame(tick);
    }

    const winsCard = document.querySelector('.wins');
    if (winsCard && !prefersReducedMotion) {
      let animated = false;
      const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && !animated) {
            animated = true;
            winsCard.querySelectorAll('.win-highlight').forEach(animateCounter);
            counterObserver.disconnect();
          }
        });
      }, { threshold: 0.4 });
      counterObserver.observe(winsCard);
    }
  </script>
</body>
</html>
